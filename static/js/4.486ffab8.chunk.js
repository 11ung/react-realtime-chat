(this["webpackJsonprealtime-chat"]=this["webpackJsonprealtime-chat"]||[]).push([[4],{131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return j}));var a=n(25);var c=n(35);function s(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=n(14),i=n(128),o=n(0),l=(n(131),n(12)),d=n(29),u=(n(132),n(1)),j=function(e){var t=e.className,n=void 0===t?"":t,a=e.id,c=e.label,s=e.type,r=void 0===s?"text":s,i=(e.icon,e.value),o=e.defaultValue,j=e.name,f=e.error,b=e.errorMessage,m=e.disabled,v=void 0!==m&&m,h=e.placeholder,x=void 0===h?"Please enter the value...":h,O=e.onChange,p=void 0===O?function(){}:O,_=(e.loading,e.viewOnly),g=void 0!==_&&_,N=e.maxLength,C=void 0===N?200:N,y=e.autoComplete,w=void 0===y?"off":y,I=e.refs,M=Object(d.a)(e,["className","id","label","type","icon","value","defaultValue","name","error","errorMessage","disabled","placeholder","onChange","loading","viewOnly","maxLength","autoComplete","refs"]);return Object(u.jsxs)("div",{id:a,className:"tr__field ".concat(n," ").concat(v?"disabled":""),children:[c&&Object(u.jsx)("label",{htmlFor:j,children:c}),Object(u.jsx)("div",{className:"tr__field--wrapper",children:g?Object(u.jsx)("p",{className:"label",children:o||i}):Object(u.jsx)("input",Object(l.a)({type:r,name:j,id:j,className:"tr__field-input ".concat(f?"error":""),placeholder:v?"":x,autoComplete:w,ref:I,onChange:p,value:i,defaultValue:o,maxLength:C},M),o)}),Object(u.jsx)("p",{className:"error ".concat(f&&b&&"active"),children:b})]})},f=function(){var e=Object(o.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(o.useRef)(),l=Object(o.useContext)(i.c),d=l.conversation,f=l.inboxeDetail,b=l.setInboxDetail,v=Object(o.useContext)(i.a).userInfo,h=Object(o.useContext)(i.b).socket;Object(o.useEffect)((function(){return h.on("sendMessage",(function(e){var t=v._id,n=e.data,a=n.creator,c=n.recipient,r=d&&d._id;(t===a&&r===c||t===c&&r===a)&&b((function(t){return[].concat(s(t),[e.data])}))})),function(){h.off("sendMessage")}}),[d]),Object(o.useLayoutEffect)((function(){c.current.scrollHeight>c.current.offsetHeight&&(c.current.scrollTop=c.current.scrollHeight)}),[f]);var x=function(){if(n){var e={recipient:d._id,text:n};h.emit("sendMessage",e),a("")}};return Object(u.jsxs)("div",{className:"tr_messbox",children:[Object(u.jsx)("div",{className:"header",children:d&&d.fullName}),Object(u.jsx)("div",{className:"content",ref:c,children:f.length>0&&f.map((function(e,t){return Object(u.jsx)(m,{mess:e.text,isAvatar:v._id===e.recipient},t)}))}),Object(u.jsxs)("div",{className:"footer flex",children:[Object(u.jsx)(j,{className:"input-search",placeholder:"Aa",onChange:function(e){var t=e.target.value;a(t)},value:n,onKeyPress:function(e){13===e.which&&x()}}),Object(u.jsx)("button",{onClick:x,children:"send"})]})]})},b=(n(133),n.p+"static/media/default-avatar.522560c8.png"),m=function(e){var t=e.mess,n=void 0===t?"":t,a=e.isAvatar,c=void 0!==a&&a,s=e.date,r=e.className,i=void 0===r?"":r;return Object(u.jsxs)("div",{className:"item flex ".concat(i," ").concat(c?"left":"right"," mtx1 "),children:[c&&Object(u.jsx)("img",{src:b,alt:"avatar",className:"avatar-mess mrx1"}),Object(u.jsx)("div",{className:"tr_mess ",children:n}),Object(u.jsx)("div",{className:"time",children:s})]})},v=(n(134),function(e){var t=e.allMessages,n=void 0===t?[]:t,a=Object(o.useContext)(i.c),c=a.conversation,s=a.setConversation,r=function(e){s(e)};return Object(u.jsxs)("div",{className:"tr_mess-nav",children:[Object(u.jsxs)("div",{className:"tr_mess-nav__header mbx2",children:[Object(u.jsx)("h1",{children:"Chat"}),Object(u.jsx)("div",{className:"tr__field mtx1",children:Object(u.jsx)("div",{className:"tr__field--wrapper",children:Object(u.jsx)(j,{className:"input-search",placeholder:"Search in Messenger"})})})]}),Object(u.jsx)("div",{className:"tr_mess-nav__content",children:n.length>0&&n.map((function(e){return Object(u.jsx)(h,{className:"".concat(e&&e.conversation&&c&&c._id===e.conversation._id?"selected":""),userInfo:e&&e.conversation,message:e&&e.latestMessage,handleSelect:r},e&&e.conversation._id)}))})]})}),h=(n(135),function(e){var t=e.className,n=void 0===t?"":t,a=e.userInfo,c=void 0===a?{}:a,s=e.message,r=void 0===s?"":s,i=e.handleSelect,o=void 0===i?function(){}:i;return Object(u.jsxs)("div",{className:"tr_user-item flex ".concat(n),onClick:function(){return o(c)},children:[Object(u.jsx)("img",{src:b,alt:"avatar",className:"avatar mrx1"}),Object(u.jsxs)("div",{className:"tr_user-item__info",children:[Object(u.jsx)("div",{className:"tr_user-item__info-name",children:c&&c.fullName}),Object(u.jsx)("div",{className:"tr_user-item__info-mess",children:r})]})]})}),x=(n(136),function(){var e=Object(o.useContext)(i.c),t=e.allMessages,n=e.doGetListInbox,a=e.conversation,c=e.doGetInboxDetail,s=e.setConversation,r=Object(o.useContext)(i.b).socket,l=Object(o.useContext)(i.a).userInfo;return Object(o.useEffect)((function(){r.on("newMessage",(function(e){var t=l._id,a=e.data,c=a.recipient,s=a.creator;console.log(e),t!==c&&t!==s||n()})),n((function(e){s(e[0].conversation)}))}),[]),Object(o.useEffect)((function(){a&&c(a._id)}),[a]),Object(u.jsxs)("div",{className:"tr_mess-content flex ",children:[Object(u.jsx)(v,{allMessages:t}),Object(u.jsx)(f,{})]})})},140:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(13),s=n(137),r=n(129),i=n(2),o=n(128),l=n(130),d=n(1);t.default=function(){var e=Object(c.e)(),t=Object(a.useContext)(o.a).userInfo;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"flex",style:{height:"38px",justifyContent:"space-between",padding:"10px",alignItems:"center"},children:["Wellcome ",t&&t.fullName,"!",Object(d.jsx)("button",{style:{height:"24px"},onClick:function(){Object(l.c)(),Object(i.m)(i.a),e.push("/authentication")},children:"Logout"})]}),Object(d.jsx)(r.b,{children:Object(d.jsx)(s.a,{})})]})}}}]);
//# sourceMappingURL=4.486ffab8.chunk.js.map